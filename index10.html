<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <title>Tienda Solidaria - Fundación NovaVida</title>

    <style>
      .producto-hover .imagen-secundaria {
        opacity: 0;
        transition: opacity 0.5s ease;
      }
      .producto-hover:hover .imagen-secundaria {
        opacity: 1;
      }
      .producto-hover:hover .imagen-principal {
        opacity: 0;
      }
    </style>
  </head>

  <body>
    <div class="wrapper d-flex flex-column min-vh-100">
      <div class="content flex-grow-1">
        <!-- HEADER Y MENÚ -->
        <div
          class="top-nih-bar py-3 border-bottom bg-white shadow-sm sticky-top"
          style="z-index: 1030"
        >
          <div
            class="container-fluid d-flex justify-content-between align-items-center"
          >
            <a
              class="logo-nih d-flex align-items-center text-decoration-none"
              href="index.html"
            >
              <img
                src="assets/img/logofundacion.png"
                alt="Logo"
                class="me-3"
                style="width: 200px; height: 100px; object-fit: contain"
              />
            </a>
            <div class="d-flex flex-column align-items-end">
              <div class="small mb-2 d-none d-lg-block">
                <a href="#" class="text-decoration-none text-muted me-3"
                  >Instagram</a
                >
                |
                <a href="#" class="text-decoration-none text-muted me-3"
                  >Dirección</a
                >
                |
                <a
                  href="https://wa.me/+56939145612"
                  target="_blank"
                  class="text-decoration-none text-muted"
                  >Whatsapp</a
                >
              </div>
              <div class="input-group" style="width: 300px">
                <input
                  type="text"
                  class="form-control form-control-sm"
                  placeholder="Buscar en NovaVida"
                />
                <button
                  class="btn btn-primary btn-sm"
                  type="button"
                  onclick="mostrarMensajeBusqueda()"
                >
                  Buscar
                </button>
              </div>
            </div>
          </div>
        </div>

        <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4 sticky-top shadow" style="top: 88px; z-index: 1020;"> 
      <div class="container-fluid">
        <a class="navbar-brand d-lg-none" href="#">Menú</a>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="index.html"><i class="bi bi-house-door-fill me-1"></i> Página principal</a>
            </li>    
            <li class="nav-item">
              <a class="nav-link" href="Index2.html">Sobre nosotros</a>
            </li>         
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownTemas" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Cuidado diario                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdownTemas">
                    <li><a class="dropdown-item" href="Index5.html">Diabetes Tipo 1</a></li>
                    <li><a class="dropdown-item" href="Index6.html">Nutrición</a></li>
                    <li><a class="dropdown-item" href="Index7.html">Ejercicio</a></li>
                    <li><a class="dropdown-item" href="Index8.html">Tecnologías de la diabetes</a></li>
                </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="Index3.html">Nuevas Investigaciones</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="Index4.html">Pregúntale a Casanova</a>
            </li>
            <li class="nav-item">
                  <a class="nav-link" aria-current="page" href="index10.html"> <i class="bi bi-shop me-1"></i>
                   </i> Tienda Solidaria</a>
                </li>
          </ul>
              <div
                class="d-flex align-items-center text-white ms-3"
                style="cursor: pointer"
              >
                <i class="bi bi-cart-fill me-2 fs-4"></i>
                <span class="badge bg-danger rounded-pill">0</span>
              </div>
            </div>
          </div>
        </nav>

        <div class="container mt-4">
          <div class="p-4 mb-5 rounded-4 bg-ligth" style="background-color: #f6f6f6">
            <h1 class="display-5 fw-bold text-center" style="color: #0d3b66">
              Tienda Solidaria Fundación NovaVida
            </h1>
            <p class="col-md-10 fs-5 text-center mx-auto text-muted">
              Adquiere productos con nosotros y apadrina a un niño para que
              acceda a tecnologías para la diabetes.
            </p>
          </div>

          <div class="container my-5">
            <h2 class="text-center mb-5 fw-bold" style="color: #0d3b66">
              Productos más solicitados
            </h2>

            <div class="row row-cols-1 row-cols-md-3 g-4">
              <!-- PRODUCTO 1 -->
              <div class="col">
                <div class="card h-100 shadow-sm border-0 producto-hover">
                  <div
                    class="position-relative overflow-hidden rounded-top"
                    style="height: 280px"
                  >
                    <img
                      src="assets/img/sensor-flash.png"
                      class="imagen-principal position-absolute top-50 start-50 translate-middle w-100 h-100"
                      style="object-fit: contain"
                      alt="Sensor"
                    />
                    <img
                      src="assets/img/sensor2.png"
                      class="imagen-secundaria position-absolute top-50 start-50 translate-middle"
                      style="
                        object-fit: contain;
                        width: 82%;
                        height: 82%;
                        transform: translate(-50%, -50%);
                      "
                      alt="Detalle"
                    />
                  </div>
                  <div class="card-body d-flex flex-column text-center">
                    <h5 class="card-title text-primary fw-bold">
                      Sensor FreeStyle Libre 2 Plus
                    </h5>
                    <p class="card-text text-muted small flex-grow-1">
                      Monitoreo continuo sin pinchazos. 14 días.
                    </p>
                    <h4 class="text-dark mb-3">$45.990</h4>
                    <div class="d-grid gap-2 mt-auto">
                     <button class="btn btn-outline-primary btn-ver-detalle"
                      data-titulo="Sensor FreeStyle Libre 2 Plus"
                      data-imagen="assets/img/sensor-flash.png"
                      data-precio="$45.990"
                      data-descripcion="El sistema FreeStyle Libre 2 Plus permite medir la glucosa automáticamente..."
                      data-caracteristicas="Duración de 14 días,Resistente al agua,Sin calibración"
                      data-url="index11.html"> Ver Detalles
                    </button>
                      <div
                        class="d-flex justify-content-center align-items-center border rounded bg-light p-2"
                      >
                        <button
                          class="btn btn-sm btn-outline-danger"
                          onclick="cambiarCantidad(this, -1)"
                        >
                          –
                        </button>
                        <span
                          class="mx-3 fw-bold cantidad-producto"
                          data-precio="45990"
                          >1</span
                        >
                        <button
                          class="btn btn-sm btn-outline-success"
                          onclick="cambiarCantidad(this, 1)"
                        >
                          +
                        </button>
                        <button
                          class="btn btn-success btn-sm ms-3 agregar-al-carrito"
                        >
                          <i class="bi bi-cart-plus"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- PRODUCTO 2 -->
              <div class="col">
                <div class="card h-100 shadow-sm border-0 producto-hover">
                  <div
                    class="position-relative overflow-hidden rounded-top"
                    style="height: 280px"
                  >
                    <img
                      src="assets/img/bomba-insulina.png"
                      class="imagen-principal position-absolute top-50 start-50 translate-middle w-100 h-100"
                      style="object-fit: contain"
                    />
                    <img
                      src="assets/img/bomba-insulina2.png"
                      class="imagen-secundaria position-absolute top-50 start-50 translate-middle"
                      style="
                        object-fit: contain;
                        width: 82%;
                        height: 82%;
                        transform: translate(-50%, -50%);
                      "
                    />
                  </div>
                  <div class="card-body d-flex flex-column text-center">
                    <h5 class="card-title text-primary fw-bold">Omnipod® 5</h5>
                    <p class="card-text text-muted small flex-grow-1">
                      Bomba sin tubos. Control automatizado.
                    </p>
                    <h4 class="text-dark mb-3">$399.990</h4>
                    <div class="d-grid gap-2 mt-auto">
                      <button class="btn btn-outline-primary btn-ver-detalle"
                      data-titulo="Omnipod® 5"
                      data-imagen="assets/img/bomba-insulina.png"
                      data-precio="$399.990"
                      data-descripcion="Sistema automatizado de administración de insulina sin tubos..."
                      data-caracteristicas="Sin cables (Tubeless),Control desde Smartphone"
                      data-url="index12.html"> Ver Detalles
                    </button>
                      <div
                        class="d-flex justify-content-center align-items-center border rounded bg-light p-2"
                      >
                        <button
                          class="btn btn-sm btn-outline-danger"
                          onclick="cambiarCantidad(this, -1)"
                        >
                          –
                        </button>
                        <span
                          class="mx-3 fw-bold cantidad-producto"
                          data-precio="399990"
                          >1</span
                        >
                        <button
                          class="btn btn-sm btn-outline-success"
                          onclick="cambiarCantidad(this, 1)"
                        >
                          +
                        </button>
                        <button
                          class="btn btn-success btn-sm ms-3 agregar-al-carrito"
                        >
                          <i class="bi bi-cart-plus"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- PRODUCTO 3 -->
              <div class="col">
                <div class="card h-100 shadow-sm border-0 producto-hover">
                  <div
                    class="position-relative overflow-hidden rounded-top"
                    style="height: 280px"
                  >
                    <img
                      src="assets/img/bomba-medt.png"
                      class="imagen-principal position-absolute top-50 start-50 translate-middle w-100 h-100"
                      style="object-fit: contain"
                    />
                    <img
                      src="assets/img/bomba-medt2.png"
                      class="imagen-secundaria position-absolute top-50 start-50 translate-middle"
                      style="
                        object-fit: contain;
                        width: 82%;
                        height: 82%;
                        transform: translate(-50%, -50%);
                      "
                    />
                  </div>
                  <div class="card-body d-flex flex-column text-center">
                    <h5 class="card-title text-primary fw-bold">
                      Bomba Medtronic MiniMed™ 780G
                    </h5>
                    <p class="card-text text-muted small flex-grow-1">
                      Sistema híbrido cerrado avanzado.
                    </p>
                    <h4 class="text-dark mb-3">$8.490.000</h4>
                    <div class="d-grid gap-2 mt-auto">
                      <button class="btn btn-outline-primary btn-ver-detalle"
                       data-titulo="Bomba Medtronic MiniMed™ 780G"
                       data-imagen="assets/img/bomba-medt.png"
                       data-precio="$8.490.000"
                       data-descripcion="El sistema MiniMed™ 780G anticipa las necesidades de insulina..."
                       data-caracteristicas="Tecnología SmartGuard™,Conectividad Bluetooth"
                       data-url="index13.html"> Ver Detalles
                  </button>
                      <div
                        class="d-flex justify-content-center align-items-center border rounded bg-light p-2"
                      >
                        <button
                          class="btn btn-sm btn-outline-danger"
                          onclick="cambiarCantidad(this, -1)"
                        >
                          –
                        </button>
                        <span
                          class="mx-3 fw-bold cantidad-producto"
                          data-precio="8490000"
                          >1</span
                        >
                        <button
                          class="btn btn-sm btn-outline-success"
                          onclick="cambiarCantidad(this, 1)"
                        >
                          +
                        </button>
                        <button
                          class="btn btn-success btn-sm ms-3 agregar-al-carrito"
                        >
                          <i class="bi bi-cart-plus"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          </div>
          <br>
           <br>
            <br>
             <br>
              <br>

          <footer class="text-center py-3 mt-5 bg-dark text-white mt-auto">
            <div class="container">
              <div class="d-flex justify-content-center align-items-center">
                <img
                  src="assets/img/luffy.jpeg"
                  alt="Luffy sonriendo"
                  class="rounded-circle me-2"
                  style="width: 60px; height: 60px; object-fit: cover"
                />
                <p class="mb-0">
                  <strong class="text-info"
                    >Anael Arturo Casanova Gutiérrez © 2025</strong
                  >
                </p>
              </div>
            </div>
          </footer>
        </div>

        <!-- MODAL DEL CARRITO -->
        <div class="modal fade" id="modalCarrito" tabindex="-1">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Tu Carrito de Compras</h5>
                <button
                  type="button"
                  class="btn-close btn-close-white"
                  data-bs-dismiss="modal"
                ></button>
              </div>
              <div class="modal-body" id="contenidoCarrito">
                <p class="text-center text-muted">Tu carrito está vacío</p>
              </div>
              <div class="modal-footer d-flex justify-content-between">
                <span class="fw-bold text-primary"
                  >Total: $<span id="totalCarrito">0</span></span
                >
                <button
                  class="btn btn-success"
                  onclick="alert('¡Compra realizada con éxito! Gracias por tu apoyo')"
                >
                  Finalizar Compra
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="modal fade" id="modalDetalleProducto" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title fw-bold" id="detalleTitulo">Nombre del Producto</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6 text-center mb-3">
            <img id="detalleImagen" src="" class="img-fluid rounded shadow-sm" style="max-height: 300px; object-fit: contain;">
          </div>
          <div class="col-md-6">
            <h3 class="text-primary fw-bold" id="detallePrecio">$0</h3>
            <p class="text-muted" id="detalleDescripcion">Descripción del producto...</p>
            
            <hr>
            
            <h6 class="fw-bold">Características:</h6>
            <ul id="detalleCaracteristicas">
                </ul>

            <div class="alert alert-info mt-3 small">
                <i class="bi bi-info-circle me-1"></i>
                La compra de este producto esta ayudando a financiar tratamientos para niños con DBT1.
            </div>
          </div>
        </div>
      </div>
       <div class="modal-footer">
        <a href="#" id="btnMasInfo" target="_blank" class="btn btn-primary text-white">
            Pincha aquí más información
        </a>
        
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script>
      function mostrarMensajeBusqueda() {
        alert(
          'Estamos trabajando para que esta función esté disponible para ti.'
        );
      }
    </script>
      <script>
    // 1. INTENTAR CARGAR EL CARRITO GUARDADO
    let carrito = JSON.parse(localStorage.getItem('carritoNovaVida')) || [];

    // Función para guardar en la memoria del navegador
    function guardarCarrito() {
        localStorage.setItem('carritoNovaVida', JSON.stringify(carrito));
        actualizarBadge();
        actualizarModal();
    }

    function cambiarCantidad(boton, cambio) {
        const span = boton.parentElement.querySelector('.cantidad-producto');
        let cantidad = parseInt(span.textContent);
        cantidad = Math.max(1, cantidad + cambio);
        span.textContent = cantidad;
    }

    function actualizarBadge() {
        const total = carrito.reduce((sum, item) => sum + item.cantidad, 0);
        const badge = document.querySelector('.badge');
        if(badge) {
            badge.textContent = total;
            badge.classList.toggle('bg-success', total > 0);
            badge.classList.toggle('bg-danger', total === 0);
        }
    }

    function actualizarModal() {
        const contenido = document.getElementById('contenidoCarrito');
        const totalElement = document.getElementById('totalCarrito');

        // Si no existen los elementos (puede pasar en algunas páginas), salimos
        if (!contenido || !totalElement) return;

        if (carrito.length === 0) {
            contenido.innerHTML = '<p class="text-center text-muted">Tu carrito está vacío</p>';
            totalElement.textContent = '0';
            return;
        }

        let html = '<div class="list-group">';
        let total = 0;

        carrito.forEach((item, index) => {
            const subtotal = item.precio * item.cantidad;
            total += subtotal;
            html += `
            <div class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                <strong>${item.nombre}</strong><br>
                <small class="text-muted">${item.cantidad} × $${item.precio.toLocaleString()}</small>
                </div>
                <div>
                <strong>$${subtotal.toLocaleString()}</strong>
                <button class="btn btn-sm btn-danger ms-3" onclick="eliminarDelCarrito(${index})">
                    <i class="bi bi-trash"></i>
                </button>
                </div>
            </div>
            `;
        });

        html += '</div>';
        contenido.innerHTML = html;
        totalElement.textContent = total.toLocaleString();
    }

    function eliminarDelCarrito(index) {
        carrito.splice(index, 1);
        guardarCarrito(); // Guardamos cambios
    }

    // EVENTO PARA AGREGAR AL CARRITO (Funciona en Index10 y en las páginas individuales)
    document.querySelectorAll('.agregar-al-carrito').forEach((boton) => {
        boton.addEventListener('click', function () {
            // Detectamos si estamos en una tarjeta (Index10) o en la página individual
            const contenedor = this.closest('.card') || this.closest('.row'); 
            
            // Buscamos el título (puede ser card-title o un h2)
            let nombreElement = contenedor.querySelector('.card-title') || contenedor.querySelector('h2');
            const nombre = nombreElement.textContent.trim();

            const precioElement = contenedor.querySelector('.cantidad-producto');
            const precio = parseInt(precioElement.dataset.precio);
            const cantidad = parseInt(precioElement.textContent);

            const existente = carrito.findIndex((item) => item.nombre === nombre);
            
            if (existente !== -1) {
                carrito[existente].cantidad += cantidad;
            } else {
                carrito.push({ nombre, precio, cantidad });
            }

            // Resetear contador visual a 1
            precioElement.textContent = '1';

            guardarCarrito(); // ¡IMPORTANTE! Guardar en memoria
            alert(`${cantidad} × ${nombre} agregado(s) al carrito!`);
        });
    });

    // ABRIR MODAL
    const btnCarrito = document.querySelector('.d-flex.align-items-center.text-white.ms-3');
    if(btnCarrito){
        btnCarrito.style.cursor = 'pointer';
        btnCarrito.addEventListener('click', () => {
            new bootstrap.Modal(document.getElementById('modalCarrito')).show();
            actualizarModal();
        });
       }

       // Inicializar al cargar la página
       document.addEventListener('DOMContentLoaded', () => {
        actualizarBadge();
        actualizarModal();
       });
      </script>
      </div>
    </div>
    <a href="#" id="btn-ir-arriba"
   class="position-fixed rounded-circle shadow-lg d-flex align-items-center justify-content-center bg-dark bg-opacity-45 text-white border border-6 border-white d-none"
   style="z-index: 1050; width: 50px; height: 50px; right: 20px; bottom: 20px;">
  <i class="bi bi-arrow-up fs-2"></i>
</a>
<script>
  const btnSubir = document.getElementById('btn-ir-arriba');

  // Mostrar/ocultar al hacer scroll
  window.addEventListener('scroll', function() {
    if (window.scrollY > 400) {
      btnSubir.classList.remove('d-none');
    } else {
      btnSubir.classList.add('d-none');
    }
  });

  // Subir suavemente al hacer clic
  btnSubir.addEventListener('click', function(e) {
    e.preventDefault();
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
</script>
<script>
  // Seleccionar todos los botones con la clase 'btn-ver-detalle'
  const botonesDetalle = document.querySelectorAll('.btn-ver-detalle');

  // Agregar evento click a cada uno
  botonesDetalle.forEach(boton => {
    boton.addEventListener('click', function() {
      
      // 1. Obtener los datos guardados en el botón
      const titulo = this.getAttribute('data-titulo');
      const imagen = this.getAttribute('data-imagen');
      const precio = this.getAttribute('data-precio');
      const descripcion = this.getAttribute('data-descripcion');
      const caracteristicas = this.getAttribute('data-caracteristicas').split(','); // Convertir lista separada por comas en Array
      
      //. OBTENER EL LINK NUEVO DEL BOTÓN
      const urlDestino = this.getAttribute('data-url');
      
      // 2. Rellenar el Modal con estos datos
      document.getElementById('detalleTitulo').textContent = titulo;
      document.getElementById('detalleImagen').src = imagen;
      document.getElementById('detallePrecio').textContent = precio;
      document.getElementById('detalleDescripcion').textContent = descripcion;

      // ASIGNAR ESE LINK AL BOTÓN AZUL DEL MODAL
      document.getElementById('btnMasInfo').href = urlDestino;

      // 3. Rellenar la lista de características (limpiar anterior primero)
      const listaUl = document.getElementById('detalleCaracteristicas');
      listaUl.innerHTML = ''; // Limpiar lista vieja
      
      caracteristicas.forEach(carac => {
          const li = document.createElement('li');
          li.textContent = carac;
          listaUl.appendChild(li);
      });

      // 4. Mostrar el Modal
      new bootstrap.Modal(document.getElementById('modalDetalleProducto')).show();
    });
  });
</script>

  </body>
</html>
